import {useState} from 'react';import {useNavigate} from 'react-router-dom';import {useTickets} from '../context/TicketContext';import {useAuth} from '../context/AuthContext';import {Send, Paperclip} from 'lucide-react';const NewTicketForm = () => {const [subject, setSubject] = useState('');const [description, setDescription] = useState('');const [category, setCategory] = useState('');const [attachments, setAttachments] = useState([]);const [error, setError] = useState('');const {addTicket} = useTickets();const {currentUser} = useAuth();const navigate = useNavigate();const handleFileChange = (e) => {setAttachments(Array.from(e.target.files));};const handleSubmit = (e) => {e.preventDefault();setError('');if (!subject || !description) {setError('Subject and description are required.');return;}if (!currentUser) {setError('You must be logged in to submit a ticket.');return;}const newTicket = {subject,description,category,customerId: currentUser.id,customerName: currentUser.name,};addTicket(newTicket);navigate('/my-tickets');};return (<div className="form-container"><h2 className="form-title">Submit New Ticket</h2>{error && <p style={{color: 'red', textAlign: 'center', marginBottom: '15px'}}>{error}</p>}<form onSubmit={handleSubmit}><div className="form-group"><label htmlFor="subject">Subject</label><inputtype="text"id="subject"className="input-field"value={subject}onChange={(e) => setSubject(e.target.value)}required/></div><div className="form-group"><label htmlFor="description">Description</label><textareaid="description"className="textarea-field"value={description}onChange={(e) => setDescription(e.target.value)}required></textarea></div><div className="form-group"><label htmlFor="category">Category (Optional)</label><selectid="category"className="select-field"value={category}onChange={(e) => setCategory(e.target.value)}><option value="">Select a category</option><option value="Technical Issue">Technical Issue</option><option value="Billing Query">Billing Query</option><option value="Feature Request">Feature Request</option><option value="General Inquiry">General Inquiry</option></select></div><div className="form-group"><label htmlFor="attachments">Attachments</label><inputtype="file"id="attachments"className="input-field"multipleonChange={handleFileChange}/>{attachments.length > 0 && (<div style={{marginTop: '10px', fontSize: '0.9em', color: '#555'}}><p>Attached files:</p><ul>{attachments.map((file, index) => (<li key={index} style={{display: 'flex', alignItems: 'center'}}><Paperclip size={14} style={{marginRight: '5px'}}/>{file.name}</li>))}</ul></div>)}</div><button type="submit" className="btn btn-primary" style={{width: '100%'}}><Send size={18} style={{marginRight: '8px'}}/>Submit Ticket</button></form></div>);};export default NewTicketForm;