import React, { useState, useEffect } from 'react';import { useNavigate, useLocation } from 'react-router-dom';import InputField from '../components/InputField.jsx';import Button from '../components/Button.jsx';import Checkbox from '../components/Checkbox.jsx';function ProfileSetup({userProfile, onSave, onLogin, showToast}) {const navigate = useNavigate();const location = useLocation();const isNewUser = location.state?.newUser;const [profileData, setProfileData] = useState(userProfile || {name: '',dateOfBirth: '',gender: '',height: '',weight: '',privacyConsent: false,});useEffect(() => {if (userProfile) {setProfileData(userProfile);}}, [userProfile]);const handleChange = (e) => {const { name, value, type, checked } = e.target;setProfileData((prevData) => ({...prevData,[name]: type === 'checkbox' ? checked : value,}));};const handleSubmit = (e) => {e.preventDefault();if (!profileData.name ||!profileData.dateOfBirth ||!profileData.gender ||!profileData.height ||!profileData.weight ||!profileData.privacyConsent) {showToast('Please fill in all fields and accept privacy consent.', 'error');return;}onSave(profileData);if (isNewUser) {onLogin(profileData); // Log in the new user after profile setup}navigate('/dashboard');showToast('Profile saved successfully!', 'success');};return (<div className="container profile-setup-form"><h2 className="text-center card-title">{isNewUser ? 'Complete Your Profile' : 'Edit Profile'}</h2><p className="text-center mb-20">Tell us a bit about yourself to get started.</p><form onSubmit={handleSubmit}><InputFieldlabel="Name"name="name"value={profileData.name}onChange={handleChange}placeholder="Your Full Name"required/><InputFieldlabel="Date of Birth"type="date"name="dateOfBirth"value={profileData.dateOfBirth}onChange={handleChange}required/><InputFieldlabel="Gender"name="gender"value={profileData.gender}onChange={handleChange}placeholder="e.g., Male, Female, Non-binary"required/><InputFieldlabel="Height (cm)"type="number"name="height"value={profileData.height}onChange={handleChange}placeholder="e.g., 175"min="100"max="250"required/><InputFieldlabel="Weight (kg)"type="number"name="weight"value={profileData.weight}onChange={handleChange}placeholder="e.g., 70"min="30"max="300"required/><div className="form-group"><Checkboxlabel="I agree to the privacy policy and terms of service."name="privacyConsent"checked={profileData.privacyConsent}onChange={handleChange}required/></div><Button type="submit" fullWidth>Save Profile</Button></form></div>);}.profile-setup-form {max-width: 500px;margin: 30px auto;padding: 25px;}export default ProfileSetup;