import React from 'react';import { useNavigate } from 'react-router-dom';import Button from '../components/Button.jsx';function Dashboard({userProfile, latestBiologicalAge, assessmentHistory}) {const navigate = useNavigate();const hasAssessments = assessmentHistory && assessmentHistory.length > 0;const getAgeDifferenceText = (actualAge, bioAge) => {if (!actualAge || !bioAge) return '';const diff = bioAge - actualAge;if (diff < -0.5) {return `You are biologically ${Math.abs(diff).toFixed(1)} years younger!`;} else if (diff > 0.5) {return `You are biologically ${diff.toFixed(1)} years older.`;} else {return `Your biological age matches your actual age.`;}};const getAgeDifferenceClass = (actualAge, bioAge) => {if (!actualAge || !bioAge) return '';const diff = bioAge - actualAge;if (diff < -0.5) return 'younger';else if (diff > 0.5) return 'older';else return 'matches';};const getActualAge = (dobString) => {if (!dobString) return null;const birthDate = new Date(dobString);const today = new Date();let age = today.getFullYear() - birthDate.getFullYear();const m = today.getMonth() - birthDate.getMonth();if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {age--;}return age;};const actualAge = userProfile ? getActualAge(userProfile.dateOfBirth) : null;const chartData = assessmentHistory.slice(0, 5).reverse(); // Show last 5 assessmentsconst maxBioAge = Math.max(...chartData.map(d => d.biologicalAge), (actualAge || 0) + 5);const minBioAge = Math.min(...chartData.map(d => d.biologicalAge), (actualAge || 0) - 5);const range = maxBioAge - minBioAge;return (<div className="container dashboard-page"><h1 className="dashboard-header">Hello, {userProfile?.name || 'Guest'}!</h1>{!hasAssessments && (<div className="card text-center"><h3 className="card-title">Start Your Health Journey</h3><p>Take your first assessment to discover your biological age and get personalized recommendations.</p><Button onClick={() => navigate('/assessment')}>Start Assessment</Button></div>)} {hasAssessments && (<><div className="card results-display"><h3 className="card-title">Your Latest Biological Age</h3><div className="results-age-comparison"><span className="actual-age-display">Actual Age: {actualAge}</span><span className="biological-age-display">{latestBiologicalAge}</span></div><p className={`age-difference-text ${getAgeDifferenceClass(actualAge, latestBiologicalAge)}`}>{getAgeDifferenceText(actualAge, latestBiologicalAge)}</p><div className="card-footer flex justify-center gap-10"><Button variant="primary" onClick={() => navigate('/recommendations')}>View Recommendations</Button><Button variant="secondary" onClick={() => navigate('/assessment')}>Retake Assessment</Button></div></div><div className="card"><h3 className="card-title">Biological Age Trend</h3><div className="dashboard-chart-container"><div className="chart-label">Biological Age</div><div className="chart-line-container">{chartData.length === 0 ? (<p className="text-center text-light-color">No history yet to display trend.</p>) : chartData.map((data, index) => {const height = range > 0 ? ((data.biologicalAge - minBioAge) / range) * 100 : 50;const barHeight = Math.max(height, 10); // Ensure a minimum heightreturn (<divkey={data.date}className="chart-bar"style={{ height: `${barHeight}%`, backgroundColor: data.biologicalAge < actualAge ? 'var(--primary-color)' : '#e53935' }}><span className="chart-bar-value">{data.biologicalAge}</span><span className="chart-bar-date">{new Date(data.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</span></div>);})}</div></div><div className="card-footer text-center"><Button variant="ghost" onClick={() => navigate('/history')}>View Full History</Button></div></div></>)}</div>);}.dashboard-page {padding-bottom: 80px;}.dashboard-header {text-align: center;margin-bottom: 30px;}.dashboard-chart-container {background-color: var(--surface-color);border-radius: 12px;box-shadow: 0 4px 12px var(--shadow-color);padding: 25px;margin-bottom: 20px;height: 250px;display: flex;flex-direction: column;justify-content: space-between;}.chart-label {font-size: 0.8em;color: var(--text-light-color);}.chart-line-container {display: flex;align-items: flex-end;justify-content: space-between;height: 150px;padding: 0 10px;position: relative;}.chart-line-container::before {content: '';position: absolute;left: 10px;right: 10px;bottom: 0;height: 1px;background-color: var(--border-color);}.chart-bar {width: 15px;background-color: var(--primary-color);border-radius: 3px 3px 0 0;position: relative;transition: height 0.3s ease-out;}.chart-bar-value {position: absolute;top: -25px;left: 50%;transform: translateX(-50%);font-size: 0.8em;font-weight: bold;color: var(--primary-dark-color);}.chart-bar-date {position: absolute;bottom: -20px;left: 50%;transform: translateX(-50%);font-size: 0.7em;color: var(--text-light-color);min-width: 40px;text-align: center;}export default Dashboard;