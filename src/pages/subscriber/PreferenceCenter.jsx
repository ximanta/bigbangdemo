import React, { useState, useEffect } from 'react';import { useParams } from 'react-router-dom';import InputField from '../../components/InputField';import Button from '../../components/Button';import Card from '../../components/Card';import Checkbox from '../../components/Checkbox';import Notification from '../../components/Notification';import { mockSubscribers, mockTopics } from '../../data/mockData';import { Save, LogOut } from 'lucide-react';const PreferenceCenter = () => {  const { email: emailParam } = useParams(); // In a real app, this would be a secure token  const [subscriber, setSubscriber] = useState(null);  const [selectedTopics, setSelectedTopics] = useState([]);  const [notification, setNotification] = useState(null);  const [loading, setLoading] = useState(true);  useEffect(() => {    // Simulate fetching subscriber data based on email/token    const foundSubscriber = mockSubscribers.find(s => s.email === emailParam);    if (foundSubscriber) {      setSubscriber(foundSubscriber);      setSelectedTopics(foundSubscriber.topics);    }    setLoading(false);  }, [emailParam]);  const handleTopicChange = (topic) => {    setSelectedTopics(prev =>      prev.includes(topic) ? prev.filter(t => t !== topic) : [...prev, topic]    );  };  const handleSavePreferences = (e) => {    e.preventDefault();    if (subscriber) {      // Simulate updating subscriber data      setSubscriber(prev => ({ ...prev, topics: selectedTopics }));      console.log(`Preferences saved for ${subscriber.email}:`, selectedTopics);      setNotification({ message: 'Preferences updated successfully!', type: 'success' });    }  };  const handleUnsubscribe = () => {    if (window.confirm('Are you sure you want to unsubscribe from all newsletters?')) {      if (subscriber) {        // Simulate unsubscribing        setSubscriber(prev => ({ ...prev, status: 'Inactive', topics: [] }));        console.log(`${subscriber.email} unsubscribed.`);        setNotification({ message: 'You have been unsubscribed.', type: 'info' });      }    }  };  if (loading) {    return (      <div className="flex-container items-center justify-center min-h-screen bg-gray-100">        <p className="text-muted">Loading preferences...</p>      </div>    );  }  if (!subscriber) {    return (      <div className="flex-container items-center justify-center min-h-screen bg-gray-100">        <Card title="Subscription Preferences" className="w-full" style={{ maxWidth: '450px' }}>          <p className="text-danger text-center">            Subscriber not found or invalid link.          </p>        </Card>      </div>    );  }  return (    <div className="flex-container items-center justify-center min-h-screen bg-gray-100">      <Card title="Subscription Preference Center" className="w-full" style={{ maxWidth: '550px' }}>        <p className="text-muted mb-4">Manage your newsletter preferences below.</p>        <InputField          label="Your Email"          id="emailDisplay"          type="email"          value={subscriber.email}          readOnly          className="mb-4"        />        <div className="input-field-group mb-4">          <label>Topics of Interest</label>          <div className="grid-container grid-col-2">            {mockTopics.map(topic => (              <Checkbox                key={topic}                id={`topic-${topic}`}                label={topic}                checked={selectedTopics.includes(topic)}                onChange={() => handleTopicChange(topic)}              />            ))}          </div>        </div>        <div className="flex-container justify-between gap-4 mt-6">          <Button            type="button"            variant="danger"            onClick={handleUnsubscribe}          >            <LogOut size={18} className="mr-2" /> Unsubscribe          </Button>          <Button            type="submit"            variant="primary"            onClick={handleSavePreferences}          >            <Save size={18} className="mr-2" /> Save Preferences          </Button>        </div>      </Card>      {notification && (        <Notification          message={notification.message}          type={notification.type}          onClose={() => setNotification(null)}        />      )}    </div>  );};export default PreferenceCenter;