import React, {useState, useEffect} from 'react';import {useNavigate} from 'react-router-dom';import Button from '../components/Button.jsx';import LoadingSpinner from '../components/LoadingSpinner.jsx';import {questions} from '../data/mockData.js';const QuestionnaireScreen = () => {  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);  const [answers, setAnswers] = useState({});  const [loading, setLoading] = useState(false);  const navigate = useNavigate();  const currentQuestion = questions[currentQuestionIndex];  const totalQuestions = questions.length;  const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;  const handleAnswerChange = (questionId, value) => {    setAnswers((prevAnswers) => ({      ...prevAnswers,      [questionId]: value,    }));  };  const handleMultipleChoiceChange = (questionId, optionValue, isChecked) => {    setAnswers((prevAnswers) => {      const currentSelections = prevAnswers[questionId] || [];      if (optionValue === 'none') {        return {          ...prevAnswers,          [questionId]: isChecked ? ['none'] : [],        };      }      const filteredSelections = currentSelections.filter(item => item !== 'none');      const newSelections = isChecked        ? [...filteredSelections, optionValue]        : filteredSelections.filter((item) => item !== optionValue);      return {        ...prevAnswers,        [questionId]: newSelections,      };    });  };  const handleNext = () => {    if (currentQuestionIndex < totalQuestions - 1) {      setCurrentQuestionIndex(currentQuestionIndex + 1);    } else {      handleSubmit();    }  };  const handlePrevious = () => {    if (currentQuestionIndex > 0) {      setCurrentQuestionIndex(currentQuestionIndex - 1);    }  };  const handleSubmit = () => {    setLoading(true);    console.log('Submitting answers:', answers);    setTimeout(() => {      setLoading(false);      navigate('/results', {state: {answers}});    }, 2000);  };  const renderAnswerInput = (question) => {    const currentValue = answers[question.id];    switch (question.type) {      case 'radio':        return (          <div className="options-group">            {question.options.map((option) => (              <div                key={option.value}                className="option-item"                onClick={() => handleAnswerChange(question.id, option.value)}              >                <input                  type="radio"                  id={`${question.id}-${option.value}`}                  name={question.id}                  value={option.value}                  checked={currentValue === option.value}                  onChange={() => handleAnswerChange(question.id, option.value)}                />                <label htmlFor={`${question.id}-${option.value}`}>{option.label}</label>              </div>            ))}          </div>        );      case 'checkbox':        return (          <div className="options-group">            {question.options.map((option) => (              <div                key={option.value}                className="option-item"                onClick={() => handleMultipleChoiceChange(question.id, option.value, !(currentValue?.includes(option.value)))}              >                <input                  type="checkbox"                  id={`${question.id}-${option.value}`}                  name={question.id}                  value={option.value}                  checked={currentValue?.includes(option.value)}                  onChange={(e) => handleMultipleChoiceChange(question.id, option.value, e.target.checked)}                />                <label htmlFor={`${question.id}-${option.value}`}>{option.label}</label>              </div>            ))}          </div>        );      case 'slider':        return (          <div className="slider-container">            <input              type="range"              min={question.min}              max={question.max}              step={question.step}              value={currentValue || question.min}              onChange={(e) => handleAnswerChange(question.id, parseFloat(e.target.value))}            />            <div className="slider-value">              {currentValue !== undefined ? currentValue : question.min} {question.id === 'q3' ? 'hours' : ''}            </div>          </div>        );      case 'number':        return (          <div className="number-picker-container">            <Button              type="button"              onClick={() => handleAnswerChange(question.id, Math.max(question.min, (currentValue || question.min) - 1))}              variant="secondary"              size="small"            >              -            </Button>            <input              type="number"              min={question.min}              max={question.max}              value={currentValue || question.min}              onChange={(e) => handleAnswerChange(question.id, parseInt(e.target.value))}            />            <Button              type="button"              onClick={() => handleAnswerChange(question.id, Math.min(question.max, (currentValue || question.min) + 1))}              variant="secondary"              size="small"            >              +            </Button>          </div>        );      case 'dropdown':        return (          <div className="input-field-container" style={{maxWidth: 'unset'}}>            <select              id={question.id}              value={currentValue || ''}              onChange={(e) => handleAnswerChange(question.id, e.target.value)}              style={{width: '100%'}}            >              <option value="">Select an option</option>              {question.options.map((option) => (                <option key={option.value} value={option.value}>                  {option.label}                </option>              ))}            </select>          </div>        );      default:        return null;    }  };  if (loading) {    return (      <div className="page-container" style={{justifyContent: 'center'}}>        <LoadingSpinner />        <p className="page-description">Calculating your Biological Age...</p>      </div>    );  }  return (    <div className="page-container">      <h1 className="page-header">Health Assessment</h1>      <p className="progress-text">Question {currentQuestionIndex + 1} of {totalQuestions}</p>      <div className="progress-indicator">        <div className="progress-bar" style={{width: `${progress}%`}}></div>      </div>      {currentQuestion && (        <div className="question-card">          <p className="question-text">{currentQuestion.text}</p>          {renderAnswerInput(currentQuestion)}        </div>      )}      <div style={{display: 'flex', gap: '15px', marginTop: '20px'}}>        <Button          onClick={handlePrevious}          disabled={currentQuestionIndex === 0}          variant="outline"        >          Previous        </Button>        <Button          onClick={handleNext}          disabled={answers[currentQuestion?.id] === undefined || (Array.isArray(answers[currentQuestion?.id]) && answers[currentQuestion?.id].length === 0)}        >          {currentQuestionIndex === totalQuestions - 1 ? 'Submit' : 'Next'}        </Button>      </div>    </div>  );};export default QuestionnaireScreen;