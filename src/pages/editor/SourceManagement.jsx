import React, { useState } from 'react';import { Plus, Edit, Trash2, RotateCcw } from 'lucide-react';import Card from '../../components/Card';import Button from '../../components/Button';import InputField from '../../components/InputField';import SelectField from '../../components/SelectField';import Modal from '../../components/Modal';import Table from '../../components/Table';import Notification from '../../components/Notification';import { mockSources, mockTopics } from '../../data/mockData';import { generateUniqueId, formatDateTime } from '../../utils/helpers';const SourceManagement = () => {  const [sources, setSources] = useState(mockSources);  const [isModalOpen, setIsModalOpen] = useState(false);  const [editingSource, setEditingSource] = useState(null);  const [form, setForm] = useState({    url: '',    name: '',    category: mockTopics[0] || ''  });  const [notification, setNotification] = useState(null);  const handleInputChange = (e) => {    const { id, value } = e.target;    setForm(prev => ({ ...prev, [id]: value }));  };  const openAddModal = () => {    setEditingSource(null);    setForm({ url: '', name: '', category: mockTopics[0] || '' });    setIsModalOpen(true);  };  const openEditModal = (source) => {    setEditingSource(source);    setForm({      url: source.url,      name: source.name,      category: source.category    });    setIsModalOpen(true);  };  const closeModal = () => {    setIsModalOpen(false);    setEditingSource(null);    setForm({ url: '', name: '', category: mockTopics[0] || '' });  };  const handleSubmit = (e) => {    e.preventDefault();    if (editingSource) {      setSources(prev => prev.map(s => s.id === editingSource.id ? { ...s, ...form } : s));      setNotification({ message: 'Source updated successfully!', type: 'success' });    } else {      const newSource = {        id: generateUniqueId(),        ...form,        status: 'Active',        lastFetched: new Date().toISOString()      };      setSources(prev => [...prev, newSource]);      setNotification({ message: 'Source added successfully!', type: 'success' });    }    closeModal();  };  const handleDelete = (id) => {    if (window.confirm('Are you sure you want to delete this source?')) {      setSources(prev => prev.filter(s => s.id !== id));      setNotification({ message: 'Source deleted successfully!', type: 'success' });    }  };  const handleRefetch = (id) => {    setSources(prev => prev.map(s => s.id === id ? { ...s, lastFetched: new Date().toISOString(), status: 'Active' } : s));    setNotification({ message: 'Source re-fetched successfully!', type: 'success' });  };  const headers = ['Name', 'URL', 'Category', 'Status', 'Last Fetched', 'Actions'];  const renderSourceRow = (source) => (    <>      <td>{source.name}</td>      <td><a href={source.url} target="_blank" rel="noopener noreferrer">{source.url}</a></td>      <td><span className="badge badge-info">{source.category}</span></td>      <td>        <span className={`badge ${source.status === 'Active' ? 'badge-success' : 'badge-danger'}`}>          {source.status}        </span>      </td>      <td>{formatDateTime(source.lastFetched)}</td>      <td className="action-buttons">        <Button variant="secondary" onClick={() => openEditModal(source)} title="Edit Source">          <Edit size={16} />        </Button>        <Button variant="secondary" onClick={() => handleRefetch(source.id)} title="Re-fetch Now">          <RotateCcw size={16} />        </Button>        <Button variant="danger" onClick={() => handleDelete(source.id)} title="Delete Source">          <Trash2 size={16} />        </Button>      </td>    </>  );  return (    <div>      <Card title="Source Management">        <div className="flex-container justify-end mb-4">          <Button variant="primary" onClick={openAddModal}>            <Plus size={18} className="mr-2" /> Add New Source          </Button>        </div>        <Table          headers={headers}          data={sources}          renderRow={renderSourceRow}          keyExtractor={(item) => item.id}        />      </Card>      <Modal        isOpen={isModalOpen}        onClose={closeModal}        title={editingSource ? 'Edit Source' : 'Add New Source'}        footerButtons={[          { label: 'Cancel', variant: 'secondary', onClick: closeModal },          { label: editingSource ? 'Save Changes' : 'Add Source', variant: 'primary', onClick: handleSubmit, type: 'submit' }        ]}      >        <form onSubmit={handleSubmit}>          <InputField            label="Source Name"            id="name"            value={form.name}            onChange={handleInputChange}            placeholder="e.g., The Verge"            required          />          <InputField            label="RSS Feed URL"            id="url"            type="url"            value={form.url}            onChange={handleInputChange}            placeholder="https://www.example.com/feed.xml"            required          />          <SelectField            label="Category"            id="category"            value={form.category}            onChange={handleInputChange}            options={mockTopics.map(topic => ({ value: topic, label: topic }))}            required          />        </form>      </Modal>      {notification && (        <Notification          message={notification.message}          type={notification.type}          onClose={() => setNotification(null)}        />      )}    </div>  );};export default SourceManagement;