export function calculateBiologicalAge(userProfile, answers) {if (!userProfile || !userProfile.dateOfBirth) {return null;}const today = new Date();const birthDate = new Date(userProfile.dateOfBirth);let chronologicalAge = today.getFullYear() - birthDate.getFullYear();const m = today.getMonth() - birthDate.getMonth();if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {chronologicalAge--;}let biologicalAge = chronologicalAge; // Start with chronological age// Factors to adjust biological age// 1. Exercise (q1, q2)const modExercise = parseInt(answers.q1 || '0');const vigExercise = parseInt(answers.q2 || '0');if (modExercise >= 3 || vigExercise >= 1) {biologicalAge -= 2; // Active} else if (modExercise === 0 && vigExercise === 0) {biologicalAge += 3; // Sedentary}// 2. Sleep (q3)const sleepHours = parseFloat(answers.q3 || '7');if (sleepHours < 6) {biologicalAge += 1.5;} else if (sleepHours > 8) {biologicalAge -= 1;}// 3. Stress (q4)const stressLevel = parseInt(answers.q4 || '3');if (stressLevel >= 4) {biologicalAge += 2;} else if (stressLevel <= 2) {biologicalAge -= 1;}// 4. Diet (q5, q9)const fruitVeg = parseInt(answers.q5 || '3');if (fruitVeg >= 5) {biologicalAge -= 1.5;} else if (fruitVeg < 3) {biologicalAge += 1;}if (answers.q9 === 'plant_based' || answers.q9 === 'fish') {biologicalAge -= 0.5;} else if (answers.q9 === 'meat') {biologicalAge += 0.5;}// 5. Smoking (q6)if (answers.q6 === 'yes') {biologicalAge += 5;}// 6. Alcohol (q7)const alcoholDrinks = parseInt(answers.q7 || '0');if (alcoholDrinks > 14) {biologicalAge += 2;} else if (alcoholDrinks > 7) {biologicalAge += 1;} else if (alcoholDrinks === 0) {biologicalAge -= 0.5;}// 7. Chronic Conditions (q8)const chronicConditions = answers.q8 || [];if (chronicConditions.length > 0 && !chronicConditions.includes('none')) {biologicalAge += chronicConditions.length * 1.5;}// 8. Social Connection (q10)const socialConnection = parseInt(answers.q10 || '1');if (socialConnection === 0) {biologicalAge += 1;} else if (socialConnection >= 2) {biologicalAge -= 0.5;}// 9. Height and Weight (BMI - very rough estimation)const heightCm = parseFloat(userProfile.height);const weightKg = parseFloat(userProfile.weight);if (heightCm && weightKg) {const bmi = weightKg / ((heightCm / 100) ** 2);if (bmi < 18.5 || bmi > 25) {biologicalAge += Math.abs(bmi - 22) * 0.1;} // Penalize for being underweight or overweight, centered around 22}// Ensure biological age doesn't go too far from chronological age for realismbiologicalAge = Math.max(chronologicalAge - 10, biologicalAge);biologicalAge = Math.min(chronologicalAge + 15, biologicalAge);return parseFloat(biologicalAge.toFixed(1));}